function SSO_JS(d){this.iframe_base_url="//gymkhana.iitb.ac.in/sso/widget/login/?";this.iframe=null;this.config=d.config||{};this.config_keys="client_id response_type redirect_uri scope state new_window".split(" ");this.colors=d.colors||{};this.color_keys=["button_div_bg_color","button_anchor_color","logout_anchor_color"];this.init=function(){this._setupMessageListener();return this._render()};this.render=function(){console.warn("render() function will be removed in future versions. Use init() instead");
return this.init()};this._render=function(){this._applyDefaults(this.config);this._scopeListToString();this._verify();this._verifyColors();var a=this._dictsToQueryParam([[this.config_keys,this.config],[this.color_keys,this.colors]]),a=this.iframe_base_url+a;this.iframe=document.createElement("iframe");this.iframe.setAttribute("id","sso-iframe");this.iframe.setAttribute("src",a);this.iframe.setAttribute("frameBorder","0");this.iframe.setAttribute("scrolling","No");this.iframe.setAttribute("height",
"70px");this.iframe.setAttribute("width","200px");this.config.sso_root.appendChild(this.iframe);return this};this._verifyColors=function(){var a=/^(?:[0-9a-fA-F]{3}){1,2}$/;this.color_keys.map(function(b){if(this.colors.hasOwnProperty(b)&&!a.test(this.colors[b]))throw Error("Color "+b+" must be a valid HEX with #");}.bind(this))};this._applyDefaults=function(a){this.config.response_type=this.config.hasOwnProperty("response_type")?a.response_type:"code";this.config.scope=this.config.hasOwnProperty("scope")?
a.scope:["basic"];this.config.new_window=this.config.hasOwnProperty("new_window")?a.new_window:"false";this.config.sso_root=this.config.hasOwnProperty("sso_root")?a.sso_root:document.getElementById("sso-root")};this._scopeListToString=function(){this.config.scope=this.config.scope.join(" ")};this._verify=function(){if(!this.config.hasOwnProperty("client_id"))throw Error("client_id is not provided");};this._dictsToQueryParam=function(a){var b=[];a.map(function(a){a[0].map(function(c){a[1].hasOwnProperty(c)&&
b.push(c+"="+a[1][c])})});return b.join("&")};this._setupMessageListener=function(){var a=window.addEventListener?"addEventListener":"attachEvent";(0,window[a])("attachEvent"==a?"onmessage":"message",function(a){null!=this.iframe&&void 0!=this.iframe&&0==this.iframe.src.indexOf(a.origin)&&this._parseMessage(a.data)}.bind(this),!1)};this._parseMessage=function(a){a=a.split("://");"sso-iframe"==a[0]&&(a=a[1].split(":"),this._resizeIFrame(a[0],a[1]))};this._resizeIFrame=function(a,b){this.iframe.height=
a+"px";this.iframe.width=b+"px"}}var sso_root=new SSO_JS({});